!function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=105)}([function(e,t){e.exports=vendor},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(4),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l={info:{customer:null,cart:{quantity:0}},search_suggestion:{category:null,keyword:null,product:null},search_history:{items:null},top_keyword:{total:0,data:[]},noti:null},u=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),i(t,[{key:"getList",value:function(e){return l[e]}}]),t}(EventEmitter),d=new u;c.default.register(function(e){switch(e=e||{},e.actionType){case"GET_INFO":$.ajax({url:"/customer/account/ajaxInfo",type:"POST",dataType:"json",data:{TIKI_CSRF_TOKEN:"feb5e3b38ac6d4e3c73aff67bba2c72d"}}).done(function(e){l.info=e,d.emit("change_info"),d.emit("change_recentlyviewed_data")});break;case"GET_NOTI":$.ajax({url:"/ajax/me/notifications?limit="+e.limitNoti,type:"GET",dataType:"json",data:{TIKI_CSRF_TOKEN:"feb5e3b38ac6d4e3c73aff67bba2c72d"}}).done(function(e){l.noti=e,d.emit("info_noti")});break;case"READ_NOTI":$.ajax({url:"/customer/notification/ajaxUpdateReadStatus",type:"POST",dataType:"json",data:{TIKI_CSRF_TOKEN:"feb5e3b38ac6d4e3c73aff67bba2c72d",notificationId:e.notiID}}).done(function(t){window.location=e.url});break;case"SET_KEYWORD_HISTORY":l.search_history=e.data;break;case"STORE_KEYWORD_HISTORY":if(0===e.keyword.title.trim().length)return;null===e.keyword.url&&(e.keyword.url="/search?q="+e.keyword.title);var t=JSON.parse(localStorage.getItem("search-keyword"));if(null===t)t=[e.keyword];else{var n=-1;$.each(t,function(t,a){a.url===e.keyword.url&&a.title===e.keyword.title&&(n=t)}),-1!==n&&t.splice(n,1),t.unshift(e.keyword)}t.splice(10,999),l.search_history.items=t,d.emit("change_keyword_history");break;case"GET_SEARCH_SUGGESTION":$.ajax({url:"/catalogsearch/suggestion",type:"POST",dataType:"JSON",data:e.data}).done(function(e){l.search_suggestion=e,d.emit("change_search_suggestion")});break;case"GET_TOP_KEYWORD":$.ajax({url:"/ajax/search/suggestion/keyword/top"}).done(function(e){l.top_keyword=e,d.emit("change_top_keyword")});break;default:return!0}}),t.default=d},function(e,t,n){e.exports=n(0)(133)},function(e,t,n){"use strict";function a(){d.default.dispatch({actionType:"GET_INFO"})}function o(e){d.default.dispatch({actionType:"GET_NOTI",limitNoti:e})}function r(e,t){d.default.dispatch({actionType:"READ_NOTI",notiID:e,url:t})}function i(e){d.default.dispatch({actionType:"GET_SEARCH_SUGGESTION",data:{q:e}})}function s(e){d.default.dispatch({actionType:"GET_TOP_KEYWORD"})}function c(e){d.default.dispatch({actionType:"SET_KEYWORD_HISTORY",data:e})}function l(e){d.default.dispatch({actionType:"STORE_KEYWORD_HISTORY",keyword:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.getInfo=a,t.getNoti=o,t.readNoti=r,t.getSearchSuggestion=i,t.getTopKeyword=s,t.setKeywordHistory=c,t.storeKeyword=l;var u=n(4),d=function(e){return e&&e.__esModule?e:{default:e}}(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=new Dispatcher;t.default=a},function(e,t,n){e.exports=n(0)(201)},function(e,t,n){e.exports=n(0)(200)},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(4),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l={id:null,price:0,list_price:0,name:"",sku:"",current_seller:{id:null,name:"",product_id:null,price:0},other_sellers:[]},u={images:{list:"undefined"!=typeof images?images:[]},reviews_favorite:{data:[],paging:null},reviews_newest:{data:[],paging:null},reviews_top:{data:[],paging:null},up_sell:{html:""},not_tiki:{html:""},same_author:{html:""},same_brand:{html:""},recently_viewed:{html:""},recently_header:{html:""},recommend:{html:""},recommendation:{related_product:{items:[]},related_bought_product:{items:[]},related_only_you:{items:[]},related_cart:{items:[]}},product_info:"undefined"!=typeof defaultProduct?defaultProduct:l,configuration:"undefined"!=typeof configuration?configuration:null,market_place_data:{pid:0,spid:0},product_images:"undefined"!=typeof images?images:[],review_images:[]},d=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),i(t,[{key:"getList",value:function(e){return u[e]}}]),t}(EventEmitter),f=new d;c.default.register(function(e){switch(e=e||{},e.actionType){case"SET_IMAGES":u.product_images=Array.concat(e.images,imageGalery),f.emit("change_all_product_image");break;case"SET_REVIEWS_SORT":$.ajax({url:e.url,type:"GET",dataType:"json",cache:!1}).done(function(t){void 0!==u[e.filter].sort_options&&u[e.filter].sort_options,u[e.filter]=t,u[e.filter].sort_options=e.sort_options,f.emit("change_reviews")});break;case"GET_REVIEWS":$.ajax({url:e.url,type:"GET",dataType:"json",cache:!1}).done(function(t){var n=void 0!==u[e.filter].sort_options&&u[e.filter].sort_options;u[e.filter]=t,n?u[e.filter].sort_options=n:u[e.filter].sort_options.map(function(e){e.map(function(e,t){e.selected=!1,0===t&&(e.selected=!0)})}),f.emit("change_reviews"),u[e.filter].review_photo.total>0&&f.emit("has_image_review")});break;case"GET_REVIEWS_IMAGE":$.ajax({url:e.url,type:"GET",dataType:"json",cache:!1}).done(function(t){var n=Array.concat(u[e.filter].data,t.data);u[e.filter]=t,u[e.filter].data=n,f.emit("change_reviews_image")});break;case"GET_ALL_REVIEWS_IMAGE":$.ajax({url:e.url,type:"GET",dataType:"json",cache:!1}).done(function(e){var t=[];e.map(function(e){e.images.map(function(e){t.push(e)})}),u.review_images=t,f.emit("change_all_reviews_image")});break;case"GET_CAROUSEL":$.ajax({url:e.url,type:"GET"}).done(function(t){u[e.state].html=t,f.emit("change_carousel_html")});break;case"GET_PRODUCT_INFO":var t={pid:e.master_product_id,spid:e.select_product_id};f.emit("load_seller_list"),$.ajax({url:"/ajaxProductRender",type:"GET",data:t}).done(function(e){u.product_info=e,e.current_seller&&(t.spid=e.current_seller.product_id),u.market_place_data=t,f.emit("update_seller_list"),f.emit("update_product_info")});break;case"SET_SELECTED_PRODUCT":u.configuration.configurable_products.map(function(t,n){t.id===e.product_id?u.configuration.configurable_products[n].selected=!0:u.configuration.configurable_products[n].selected=!1}),f.emit("change_select_product");case"MERGE_RECENTLYVIEWED":f.emit("change_recentlyviewed_data");break;case"GET_RECOMMENDATION":var n=void 0,a="https://api.tiki.vn/v2/recommendation";"undefined"!=typeof recUrlTest&&(a=recUrlTest),n=null!==e.product_id?{client_id:e.client_id,customer_id:e.customer_id,product_id:e.product_id,scenario_id:e.scenario_id,limit:e.limit}:{client_id:e.client_id,customer_id:e.customer_id,scenario_id:e.scenario_id,limit:e.limit},$.ajax({url:a,type:"GET",data:n,crossDomain:!0}).done(function(t){u.recommendation[e.scenario_id].items=t,f.emit("change_recommendation")});break;default:return!0}}),t.default=f},function(e,t,n){e.exports=n(0)(222)},function(e,t,n){"use strict";function a(e){p.default.dispatch({actionType:"SET_IMAGES",images:e})}function o(e,t){p.default.dispatch({actionType:"GET_REVIEWS",url:e,filter:t})}function r(e,t,n){p.default.dispatch({actionType:"SET_REVIEWS_SORT",sort_options:t,filter:e,url:n})}function i(e,t){p.default.dispatch({actionType:"GET_REVIEWS_IMAGE",url:e,filter:t})}function s(e){p.default.dispatch({actionType:"GET_ALL_REVIEWS_IMAGE",url:e})}function c(e,t){p.default.dispatch({actionType:"GET_CAROUSEL",url:e,state:t})}function l(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"related_product",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;p.default.dispatch({actionType:"GET_RECOMMENDATION",client_id:e,customer_id:t,product_id:n,scenario_id:a,limit:o})}function u(e,t){p.default.dispatch({actionType:"GET_PRODUCT_INFO",master_product_id:e,select_product_id:t})}function d(e){p.default.dispatch({actionType:"SET_SELECTED_PRODUCT",product_id:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.setImage=a,t.getReviews=o,t.setReviewSortOption=r,t.getReviewsImage=i,t.getAllReviewsImage=s,t.getCarousel=c,t.getRecommendation=l,t.getProductInfo=u,t.setSelectedProduct=d;var f=n(4),p=function(e){return e&&e.__esModule?e:{default:e}}(f)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var o=n(25),r=a(o);n(21);var i=n(2),s=n(5),c=a(s);n(6);var l=n(11),u=a(l),d=n(20),f=a(d),p=n(24),h=n(23),m=a(h);"undefined"==typeof _babelPolyfill&&n(22),window.Dispatcher=p.Dispatcher,window.EventEmitter=m.default,window.$=r.default,window.jQuery=r.default,window.React=u.default,window.ReactDOM=f.default,window.Tala=c.default,window.urldecode=i.urldecode},function(e,t,n){e.exports=n(0)(227)},function(e,t,n){"use strict";n(39),function(){var e={Push:function(e){var t=this._pageType();if("undefined"!=typeof dataLayer&&""!==t){var n={pagetype:t,platform:"desktop"};null!==e&&void 0!==e&&(n.user=e.id,n.email=MD5(e.email),n.email_full=e.email),"product"===t&&(n.product_id=[$("input[id=product_id]").val()],n.product_sku=$("input[id=product_sku]").val(),n.product_name=$("h1.item-name[itemprop=name]").text().trim(),n.product_category=$("input[id=productset_name]").val(),n.product_brand=$('div[itemprop="brand"] meta[itemprop="name"]').attr("content"),n.product_sku=$("input[id=product_sku]").val(),n.totalvalue=$("input[id=product_price]").val(),n.seller_price=$("input[id=product_price]").val(),n.seller_product_id=$("input[id=product_id_add_cart]").val()),"cart"===t&&(n.totalvalue=this._cartSubtotal(),n.product_id=this._productIDs("div[data-id]","id"),n.product_list=window.gtm_products2,n.seller_product_list=window.gtm_products3,n.seller_product_id=window.product_ids_2),"category"===t&&(n.product_id=this._productIDs(".product-item[data-id]","id"),n.seller_product_id=this._productIDs(".product-item[data-id]","seller-product-id")),dataLayer.push(n)}},_pageType:function(){return $("body").hasClass("tiki-categories")?"category":$("body").hasClass("tiki-home")?"home":$("body").hasClass("tiki-product")?"product":$("body").hasClass("tiki-cart")?"cart":$("body").hasClass("tiki-purchase")?"purchase":""},_productIDs:function(e,t){var n=[];return $(e).length>0&&$(e).each(function(){var e=$(this).data(t);void 0!==e&&0!==e&&n.push(e.toString())}),n},_cartSubtotal:function(){var e=0;return $("[data-product-id]").length>0&&$("[data-product-id]").each(function(){var t=$(this).data("itemQty"),n=$(this).data("itemPrice");void 0!==t&&(e+=t*n)}),e}};window.GTMPageTrack=e}()},function(e,t,n){e.exports=n(0)(206)},function(e,t,n){e.exports=n(0)(134)},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(27),i=function(e){return e&&e.__esModule?e:{default:e}}(r),s=function(){function e(){a(this,e),this.$element=$("footer"),new i.default}return o(e,[{key:"loadNewsletter",value:function(){$(".js-newsletter-toggle").on("click",function(){$(".newsletter").toggleClass("is-up"),"undefined"!=typeof localStorage&&null!==localStorage&&(localStorage.hideNewsletter=!$(".newsletter").hasClass("is-up"))}),"undefined"!=typeof localStorage&&null!==localStorage&&(void 0!==localStorage.hideNewsletter&&"false"!==localStorage.hideNewsletter||$(".js-newsletter-toggle").trigger("click"))}},{key:"randomizStickyBanenr",value:function(){var e=$(".sticky-screen-banner.right");if(!(e.length<=0)){var t=e.find("a");if(t.length>1){var n=Math.ceil(1e3*Math.random())%t.length;t.eq(n).show()}}}},{key:"initFBLoad",value:function(){$("#showFbFanpage").click(function(){FB.Event.subscribe("xfbml.render",function(e){$(".footer-facebook").removeClass("loading")});var e=$(".footer-facebook");e.addClass("loading"),e.append("<div id='fbFanpage' class='fb-like' data-href='https://www.facebook.com/tiki.vn' data-send='false' data-width='250' data-height='70' data-show-faces='true'></div>"),FB.XFBML.parse(document.getElementById("#fbFanpage")),e.addClass("fb-loaded")})}}]),e}();t.default=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(29),l=a(c),u=n(28),d=a(u),f=n(2),p=n(30),h=a(p),m=n(31),g=a(m),y=n(32),v=a(y);n(35),n(36);var _=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return $("#header").length>0&&(e.header=$("#header"),e.loadMainNavigation(),e.initHeaderSticky(),e.initHeaderMenuToggle(),new g.default,ReactDOM.render(React.createElement(l.default,null),document.getElementById("header-cart")),ReactDOM.render(React.createElement(d.default,null),document.getElementById("header-user")),ReactDOM.render(React.createElement(h.default,null),document.getElementById("header-noti")),ReactDOM.render(React.createElement(v.default,{url:"/ajax_recentlyviewed?type=header"}),document.getElementById("main-ajax-recentlyviewed"))),e}return i(t,e),s(t,[{key:"initHeaderMenuToggle",value:function(){var e=this;this.headerToggleTimeout=!1,this.header.find(".user-profile").hover(function(){$(this).find(".box").show()},function(){$(this).find(".box").hide()}),this.header.find(".main-nav-wrap").hover(function(){!e.header.hasClass("sticked")&&$("body").hasClass("tiki-home")||(0,f.toggleHeaderOverlay)(!0)},function(){(0,f.toggleHeaderOverlay)(!1)})}},{key:"loadListeners",value:function(){var e=this;$(".header-navigation").on("click",function(){var t=$("body").hasClass("tiki-home")&&$(this).parents(".wrap-header").hasClass("affix"),n=!$("body").hasClass("tiki-home");if(t||n){var a=!$(this).hasClass("active"),o=a?e.headerMenusToggleDelay:0;e.clearOverlay(),e.toggleOverlay(a,o,$(this))}}),$(".header-navigation").on("mouseenter",function(t){var n=$("body").hasClass("tiki-home")&&$(this).parents(".wrap-header").hasClass("affix"),a=!$("body").hasClass("tiki-home");(n||a)&&($(".search-autocomplete").hide(),$("body").removeClass("no-overflow"),$(".wrap-header").removeClass("on-searching"),e.toggleOverlay(!0,e.headerMenusToggleDelay,$(this)))}),$(".header-navigation").on("mouseleave",function(t){var n=$("body").hasClass("tiki-home")&&$(this).parents(".wrap-header").hasClass("affix"),a=!$("body").hasClass("tiki-home");(n||a)&&e.toggleOverlay(!1,0,$(this))})}},{key:"loadMainNavigation",value:function(){$(".main-nav-wrap > ul").menuAim({activate:function(e){$(e).children(".nav-sub").css("display","block"),$(e).children("a").addClass("active"),$(e).children(".nav-sub").find("img[data-src]").lazy({effect:"fadeIn",effectTime:200,threshold:0,bind:"event"})},deactivate:function(e){$(e).children(".nav-sub").css("display","none"),$(e).children("a").removeClass("active")},exitMenu:function(){return $(this).find(".nav-sub").css("display","none"),!0}})}},{key:"toggleHeaderForm",value:function(){var e=$("body").scrollTop();/firefox/i.test(navigator.userAgent)&&(e=$("html, body").scrollTop());var t=this.header.height(),n=t;$("body").hasClass("tiki-home")&&(n+=$("#home-banner").height());var a=e>n+100;this.header.toggleClass("sticked",a),$("body").toggleClass("header-sticked",a)}},{key:"initHeaderSticky",value:function(){var e=this;$(window).on("scroll",function(){!1!==e.headerToggleTimeout&&clearTimeout(e.headerToggleTimeout),e.toggleHeaderForm()}).scroll()}},{key:"showTooltipLinkSocial",value:function(){"true"==localStorage.getItem("IsShowSocial")||($(".box-social").show(300),localStorage.setItem("IsShowSocial","true")),setTimeout(function(){$(".box-social").hide(300)},1e4),$(".box-social .close").on("click",function(){return $(".box-social").hide(300),!1})}}]),t}(React.Component);t.default=_},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(26),n(19),n(13),n(38),n(37);var r=n(5),i=function(e){return e&&e.__esModule?e:{default:e}}(r),s=function(){function e(){a(this,e),this.recaptchaLoaded=!1,this.loadFancyBox(),this.handleIsCheck(),this.handleSwitch(),this.handleForm()}return o(e,[{key:"handleSwitch",value:function(){$("#register-form #gender").bootstrapSwitch({onText:"Nam",offText:"Nữ",onColor:"info"}),$("#register-form-shipping #gender").bootstrapSwitch({onText:"Nam",offText:"Nữ",onColor:"info"})}},{key:"handleIsCheck",value:function(){$(".icheck").iCheck({checkboxClass:"icheckbox_square-blue",radioClass:"iradio_square-blue",increaseArea:"20%"})}},{key:"loadFancyBox",value:function(){$("#reset-password-form").on("show.bs.modal",function(){$("body").removeClass("no-overflow"),$(".wrap-header").removeClass("toggle-overlay on-searching"),$(".global-overlay").hide(0),$("#login-form").modal("hide")}),$("#login-form").on("shown.bs.modal",function(){$("#register-form").modal("hide"),$("#login_popup_form").bootstrapValidator("disableSubmitButtons",!1).bootstrapValidator("resetForm",!0),$("#login_popup_form").find(".ajax-message").text(""),$("body").removeClass("no-overflow"),$(".wrap-header").removeClass("toggle-overlay on-searching"),$(".global-overlay").hide(0)}),$("#register-form").on("shown.bs.modal",function(){$("#login-form").modal("hide"),$("#register_popup_form").bootstrapValidator("disableSubmitButtons",!1).bootstrapValidator("resetForm",!0),$("#register_popup_form input[name=gender]").iCheck("update"),$("#register_popup_form").find(".ajax-message").text(""),$("#birthday-picker-popup").html(""),$("#birthday-picker-popup").birthdaypicker({dateFormat:"littleEndian"}),$("body").removeClass("no-overflow"),$(".wrap-header").removeClass("toggle-overlay on-searching"),$(".global-overlay").hide(0)})}},{key:"handleForm",value:function(){var e=this;$("#login_popup_form").bootstrapValidator({framework:"bootstrap",trigger:"blur",feedbackIcons:{valid:"fa fa-check hidden",invalid:"fa fa-close",validating:"fa fa-refresh"},fields:{email:{validators:{notEmpty:{message:"Vui lòng nhập Email hoặc Số điện thoại"},regexp:{regexp:"",message:"Email hoặc Số điện thoại không hợp lệ"}}},password:{notEmpty:{message:"Vui lòng nhập mật khẩu"},validators:{stringLength:{min:6,max:32,message:"Mật khẩu phải dài từ 6 đến 32 ký tự"}}}}}).on("error.field.bv",function(e,t){$(e.target).parent().find(".ajax-message").text(""),t.bv.disableSubmitButtons(!1)}).on("success.field.bv",function(e,t){var n=$(e.target).parent();n.find(".ajax-message").text(""),n.find(".form-control-feedback").removeClass("fa fa-close"),t.bv.disableSubmitButtons(!1)}).on("success.form.bv",function(t){t.preventDefault(),e.doAjaxLogin("#login_popup_form")}),$('#login_popup_form input[name="email"], #login_popup_form input[name="password"]').on("click",function(e){var t=$(this).parents(".form-group");t.hasClass("has-error")&&($("#login_popup_form").bootstrapValidator("resetField",$(this)),t.removeClass("has-error").find(".ajax-message").text(""))}),$("#register_popup_form").bootstrapValidator({framework:"bootstrap",trigger:"blur",feedbackIcons:{valid:"fa fa-check",invalid:"fa fa-close",validating:"fa fa-refresh"},group:".input-wrap",fields:{email:{validators:{notEmpty:{message:"Vui lòng nhập Email Hoặc Số điện thoại"},remote:{url:"/customer/account/ajaxCheckExistedEmail",message:"Email hoặc Số điện thoại đã tồn tại",type:"POST",data:function(e){return{email:e.getFieldElements("email").val(),TIKI_CSRF_TOKEN:$("input[name=TIKI_CSRF_TOKEN]").val()}}}}},password:{validators:{notEmpty:{message:"Vui lòng nhập mật khẩu"},stringLength:{min:6,max:32,message:"Mật khẩu phải dài từ 6 đến 32 ký tự"}}},gender:{validators:{notEmpty:{message:"Vui lòng chọn giới tính"}}},full_name:{validators:{notEmpty:{message:"Vui lòng nhập họ tên"}}}}}).on("error.field.bv",function(e,t){var n=$(e.target);n.parent().find(".ajax-message").text(""),t.result.hasOwnProperty("error")&&$("#register_popup_form").bootstrapValidator("updateMessage",n,"remote",t.result.error),t.bv.disableSubmitButtons(!1)}).on("success.field.bv",function(e,t){var n=$(e.target).parent();n.removeClass("has-error"),n.find(".ajax-message").text(""),n.find(".form-control-feedback").removeClass("fa-close"),t.bv.disableSubmitButtons(!1)}).on("success.form.bv",function(t){t.preventDefault(),e.doAjaxRegister("#register_popup_form")}).find('input[name="gender"]').iCheck({checkboxClass:"icheckbox_square-blue",radioClass:"iradio_square-blue",increaseArea:"20%"}).on("ifChanged",function(e){var t=$(this).attr("name");$("#register_popup_form").bootstrapValidator("revalidateField",t)}).end(),$('#register_popup_form input[name="email"], #register_popup_form input[name="password"], #register_popup_form input[name="full_name"]').on("click",function(e){var t=$(this),n=t.parent();n.hasClass("has-error")&&($("#register_popup_form").bootstrapValidator("resetField",t),n.removeClass("has-error").find(".ajax-message").text(""))}),$("#reset_popup_form").submit(function(e){var t=$(this).serializeArray(),n=$(this).attr("action");$("#forgot_pass").removeClass("has-error"),$("#forgot_pass span").empty(),$("#forgot_successful").removeClass("alert alert-success"),$("#forgot_successful span").empty(),i.default.ajax({url:n,data:t,csrf:!0,loader:$("body"),success:function(e){"success"===e.status?($("#forgot_successful").addClass("alert alert-success"),$("#forgot_successful span").text(e.message),$("#forgot_pass").addClass("hide"),$("form#reset_popup_form > div.last").addClass("hide")):($("#forgot_pass").addClass("has-error"),$("#forgot_pass span").text(e.messages.email))}}),e.preventDefault()}),$("#reset_form_submit").on("click",function(){$("#reset_popup_form").submit()}),$("#reset-password-form a[data-toggle=modal], #login-form a[data-toggle=modal], #register-form a[data-toggle=modal]").click(function(e){e.preventDefault(),e.stopPropagation(),$($(this).attr("data-target")).modal("show")})}},{key:"loadReCaptcha",value:function(){if(window.onloadReCapchaCallback=function(){!0===renderRecaptcha&&(null!==document.getElementById("login-popup-recaptcha")&&grecaptcha.render("login-popup-recaptcha",{sitekey:recaptchaKey}),null!==document.getElementById("login-checkout-recaptcha")&&grecaptcha.render("login-checkout-recaptcha",{sitekey:recaptchaKey}),null!==document.getElementById("login-recaptcha")&&grecaptcha.render("login-recaptcha",{sitekey:recaptchaKey}))},this.recaptchaLoaded)null!==document.getElementById("login-popup-recaptcha")&&grecaptcha.render("login-popup-recaptcha",{sitekey:recaptchaKey}),null!==document.getElementById("login-checkout-recaptcha")&&grecaptcha.render("login-checkout-recaptcha",{sitekey:recaptchaKey});else{var e=document.createElement("script");e.type="text/javascript",e.async=!1,e.src="https://www.google.com/recaptcha/api.js?onload=onloadReCapchaCallback&render=explicit";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),this.recaptchaLoaded=!0}}},{key:"doAjaxLogin",value:function(e){var t=this,n=$(e).serializeArray(),a=$(e).attr("action");$(e).bootstrapValidator("disableSubmitButtons",!1).bootstrapValidator("resetForm"),$("#error_captcha span").empty(),i.default.ajax({url:a,data:n,csrf:!0,loader:$("body"),success:function(e){void 0!==e.useCaptcha&&!0===e.useCaptcha&&t.loadReCaptcha(),void 0!==e.messages&&(void 0!==e.messages.captcha&&($("#error_captcha span").text(e.messages.captcha),$("#error_captcha").addClass("has-error")),void 0!==e.messages.email&&($("#popup_login").addClass("has-error"),$("#popup_login .ajax-message").text(e.messages.email),$("#popup_login").find(".form-control-feedback").addClass("fa fa-close").show()),void 0!==e.messages.password&&($("#popup_password").addClass("has-error"),$("#popup_password .ajax-message").text(e.messages.password),$("#popup_password").find(".form-control-feedback").addClass("fa fa-close").show())),void 0!==e.success&&("undefined"!=typeof talalytics&&void 0!==e.userId&&e.userId&&talalytics.track({type:"set",eventType:"LOGIN",userId:e.userId.toString(),source:"web"}),"undefined"!=typeof mixpanel&&mixpanel.track("Login",{Source:"Email"}),e.ref&&(window.document.href=e.ref),window.location.reload(!0))}})}},{key:"doAjaxRegister",value:function(e){var t=$(e).serializeArray(),n=$(e).attr("action");$(e).bootstrapValidator("disableSubmitButtons",!1).bootstrapValidator("resetForm"),$("#general_error").removeClass("has-error"),$("#general_error span").empty(),$("#register_birthday").removeClass("has-error"),$("#register_birthday span:last").empty(),i.default.ajax({url:n,data:t,csrf:!0,loader:$("body"),success:function(e){void 0!==e.success&&("undefined"!=typeof mixpanel&&mixpanel.track("Register",{Source:"Email"}),window.location.reload(!0)),void 0!==e.generalError?($("#general_error").addClass("has-error"),$("#general_error span").text(e.generalError)):void 0!==e.customerId&&("1"===$("input[name=shippingStep]").val()?location.reload():window.location.href="/customer/account"),void 0!==e.messages&&(void 0!==e.messages.email&&($("#register_email .input-wrap").removeClass("has-success").addClass("has-error"),$("#register_email .ajax-message").text(e.messages.email),$("#register_email").find(".form-control-feedback").addClass("fa fa-close").show()),void 0!==e.messages.password&&($("#register_password .input-wrap").removeClass("has-success").addClass("has-error"),$("#register_password .ajax-message").text(e.messages.password),$("#register_password").find(".form-control-feedback").addClass("fa fa-close").show()),void 0!==e.messages.full_name&&($("#register_name .input-wrap").removeClass("has-success").addClass("has-error"),$("#register_name .ajax-message").text(e.messages.full_name),$("#register_name").find(".form-control-feedback").addClass("fa fa-close").show()),void 0!==e.messages.birthday&&($("#register_birthday").addClass("has-error"),$("#register_birthday ajax-message").text(e.messages.birthday)))}})}}]),e}();t.default=s},function(e,t,n){e.exports=n(0)(218)},function(e,t,n){e.exports=n(0)(213)},function(e,t,n){e.exports=n(0)(226)},function(e,t,n){e.exports=n(0)(199)},function(e,t,n){e.exports=n(0)(223)},function(e,t,n){e.exports=n(0)(224)},function(e,t,n){e.exports=n(0)(225)},function(e,t,n){e.exports=n(0)(431)},function(e,t,n){e.exports=n(0)(205)},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(1),i=(function(e){e&&e.__esModule}(r),n(3),function(){function e(t){a(this,e),this._addEvent(),this.stickyBannersStorage=null}return o(e,[{key:"_addEvent",value:function(){this.handlesStickyBannersStorage(),this.handleStickyScreenBanners()}},{key:"handlesStickyBannersStorage",value:function(e){var t=this;e=e||!1;var n=function(e){var t=(new Date).getTime();return e=+e,Math.round(Math.abs((e-t)/864e5))},a=function(e,a,o){var r=void 0,i=void 0;for(var s in t.stickyBannersStorage)t.stickyBannersStorage.hasOwnProperty(s)&&(r=t.stickyBannersStorage[s],i=$("#"+r.code),e&&e===r.code&&a&&o?(i.addClass("hidden"),t.stickyBannersStorage[s].dateClosed=a,t.stickyBannersStorage[s].isClosed=o,localStorage.setItem("stickyBanners",JSON.stringify(t.stickyBannersStorage))):null!==r.dateClosed?n(r.dateClosed)>5?(t.stickyBannersStorage[s].dateClosed=null,t.stickyBannersStorage[s].isClosed=!1):(i.addClass("hidden"),t.stickyBannersStorage[s].isClosed=!0):(i.removeClass("hidden"),t.stickyBannersStorage[s].isClosed=!1),i.css({opacity:1}))};return"undefined"!=typeof localStorage&&null!==localStorage?(t.stickyBannersStorage=JSON.parse(localStorage.getItem("stickyBanners")),t.stickyBannersStorage?e||a():t.stickyBannersStorage={bottom:{code:"sticky_screen_bottom",dateClosed:null,isClosed:!1},left:{code:"sticky_screen_left",dateClosed:null,isClosed:!1},right:{code:"sticky_screen_right",dateClosed:null,isClosed:!1}}):$(".sticky-screen-banner").css({opacity:1}),localStorage.setItem("stickyBanners",JSON.stringify(t.stickyBannersStorage)),a}},{key:"handleStickyScreenBanners",value:function(){var e=this;$(".sticky-screen-banner-close").on("click",function(t){t.preventDefault();var n=$(this).parents(".sticky-screen-banner"),a=n.attr("id");"undefined"!=typeof localStorage&&null!==localStorage?e.handlesStickyBannersStorage(!0)(a,(new Date).getTime(),!0):n.addClass("hidden")})}}]),e}());t.default=i},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=n(3);n(12);var u=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=c.default.getList("info"),n._onChange=n._onChange.bind(n),n}return r(t,e),i(t,[{key:"_onChange",value:function(){var e=c.default.getList("info");if(GTMPageTrack.Push(e.customer),this.setState(e),this.state.customer&&window.appboy){appboy.changeUser(this.state.customer.id);var t=appboy.getUser();t.setEmail(this.state.customer.email),t.setFirstName(this.state.customer.name),t.setLastName("")}}},{key:"componentDidMount",value:function(){null==this.state.customer&&(0,l.getInfo)(),c.default.on("change_info",this._onChange)}},{key:"componentWillUnmount",value:function(){c.default.removeListener("change_info",this._onChange)}},{key:"getParameterByName",value:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),a=n.exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}},{key:"getDropdown",value:function(){var e=this.state.customer,t=(this.getParameterByName("ref"),"https://"+document.domain+"/desktop/img/svg/zaloicon.svg"),n="https://"+document.domain+"/customer/account/loginZalo";return window.location.pathname&&window.location,window.location.search&&window.location.search,null===e?($("#login_link>a").on("click",function(e){e.preventDefault(),$("#login-form").modal("show")}),$(".user-name-register>a").on("click",function(e){e.preventDefault(),$("#register-form").modal("show")}),$(".user-name-loginfb, a#registerfacebook").on("click",function(){var e=$(this).data("url");window.open(e,"popupWindow","width=640,height=480,scrollbars=yes")}),$(".user-name-login-google, a#registergoogle").on("click",function(){var e=$(this).data("url");window.location.href=e}),$(".user-name-login-zalo, a#registerzalo").on("click",function(){var e=$(this).data("url");window.location.href=e}),React.createElement("ul",{className:"user-ajax-guest"},React.createElement("li",{id:"login_link"},React.createElement("a",{href:"#",title:"Đăng Nhập",className:"user-name-login"},React.createElement("span",{className:"text"},"Đăng nhập"))),React.createElement("li",{className:"user-name-register"},React.createElement("a",{href:"#",title:"Tạo tài khoản mới"},React.createElement("span",{className:"text"},"Tạo tài khoản"))),React.createElement("li",{id:"login_fb_link"},React.createElement("a",{className:"user-name-loginfb",title:"Đăng nhập bằng Facebook",href:"javascript: void(0)","data-url":"https://tiki.vn/customer/account/loginFacebook"},React.createElement("span",{className:"icon"},React.createElement("i",{className:"ico ico-facebook"})),React.createElement("span",{className:"text"},"Đăng nhập bằng Facebook"))),React.createElement("li",{id:"login_google_link"},React.createElement("a",{className:"user-name-login-google",title:"Đăng nhập bằng Google",href:"javascript: void(0)","data-url":"https://tiki.vn/customer/account/login_google"},React.createElement("span",{className:"icon"},React.createElement("i",{className:"ico ico-google"})),React.createElement("span",{className:"text"},"Đăng nhập bằng Google"))),React.createElement("li",{id:"login_zalo_link"},React.createElement("a",{className:"user-name-login-zalo",title:"Đăng nhập bằng Zalo",href:"javascript: void(0)","data-url":n},React.createElement("img",{src:t}),React.createElement("span",{className:"text"},"Đăng nhập bằng Zalo"))))):(1===e.p24h&&$(".img24h").show(),customerId=e.id,React.createElement("ul",{className:"user-ajax-customer"},React.createElement("li",null,React.createElement("a",{rel:"nofollow",href:"/sales/order/history/",title:"Đơn hàng của tôi"},"Đơn hàng của tôi")),React.createElement("li",{className:"book-profile"},!0===e.isTikier?React.createElement("a",{rel:"nofollow",href:"/bookprofile/"+e.email,title:"Tủ sách của tôi"},"Tủ sách của tôi"):""),React.createElement("li",{className:"notification-count"},React.createElement("a",{rel:"nofollow",href:"/customer/notification/",title:"Thông báo của tôi"},"Thông báo của tôi",React.createElement("strong",null,e.notification_count))),React.createElement("li",null,React.createElement("a",{rel:"nofollow",href:"/customer/account/edit",title:"Tài khoản của tôi"},"Tài khoản của tôi")),React.createElement("li",null,React.createElement("a",{rel:"nofollow",href:"/customer/save_for_later/",title:"Để dành mua sau"},"Để dành mua sau")),React.createElement("li",null,React.createElement("a",{rel:"nofollow",href:"/danh-rieng-cho-ban",title:"Sản phẩm bạn đã xem"},"Sản phẩm bạn đã xem")),React.createElement("li",null,React.createElement("a",{rel:"nofollow",href:"/nhan-xet-san-pham-ban-da-mua",title:"Nhận xét sản phẩm đã mua"},"Nhận xét sản phẩm đã mua")),React.createElement("li",null,React.createElement("a",{rel:"nofollow",href:"/customer/wishlist/",title:"Danh sách yêu thích"},"Danh sách yêu thích")),React.createElement("li",null,React.createElement("a",{rel:"nofollow",href:"/customer/review/",title:"Nhận xét của tôi"},"Nhận xét của tôi")),React.createElement("li",{className:"reward-point"},React.createElement("a",{rel:"nofollow",href:"/customer/reward/",title:"Thông tin Tiki Xu"},"Thông tin Tiki Xu",React.createElement("br",null),React.createElement("span",null,"(Bạn đang có ",React.createElement("b",null,e.points)," Tiki xu)"))),React.createElement("li",{className:"my-bookcare"},React.createElement("a",{rel:"nofollow",href:"/customer/bookcare/",title:"Book Care của tôi"},"Book Care của tôi",React.createElement("br",null),React.createElement("span",null,"(Bạn đang có ",React.createElement("b",null,e.bookcare_quantity)," Bookcare)"))),React.createElement("li",null,React.createElement("a",{rel:"nofollow",href:"/doi-tra-de-dang",title:"Hướng dẫn đổi trả"},"Đổi trả dễ dàng")),React.createElement("li",null,React.createElement("a",{rel:"nofollow",href:"/customer/account/logout",title:"Thoát tài khoản"},"Thoát tài khoản"))))}},{key:"getUserLink",value:function(){var e=this.state.customer;return null===e?React.createElement("div",null,React.createElement("i",{className:"ico ico-user"}),React.createElement("b",null,"Đăng nhập"),React.createElement("br",null),React.createElement("small",null,"Tài khoản")):React.createElement("div",null,React.createElement("i",{className:"ico ico-user"}),React.createElement("b",null,"Chào ",e.name),React.createElement("br",null),React.createElement("small",null,"Tài khoản"))}},{key:"render",value:function(){return this.state.customer,React.createElement("div",null,this.getUserLink(),React.createElement("div",{className:"box"},this.getDropdown()))}}]),t}(React.Component);t.default=u},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=c.default.getList("info"),n._onChange=n._onChange.bind(n),n}return r(t,e),i(t,[{key:"_onChange",value:function(){this.setState(c.default.getList("info"))}},{key:"componentDidMount",value:function(){c.default.on("change_info",this._onChange)}},{key:"componentWillUnmount",value:function(){c.default.removeListener("change_info",this._onChange)}},{key:"render",value:function(){var e=this.state.cart;return React.createElement("a",{rel:"nofollow",href:"/checkout/cart",className:"header-cart item"},React.createElement("i",{className:"ico ico-cart"}),"Giỏ hàng",React.createElement("span",{className:"cart-count"},e.quantity),React.createElement("div",{className:"add-to-cart-success"},React.createElement("span",{className:"close"},React.createElement("img",{src:"/assets/img/cancel.png"})),React.createElement("p",{className:"text"},React.createElement("img",{src:"/assets/img/icon-svg/icon-tick.svg",alt:"",width:"18"}),"Thêm vào giỏ hàng thành công!"),React.createElement("button",{className:"btn"},"Xem giỏ hàng và thanh toán")))}}]),t}(React.Component);t.default=l},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(1),l=a(c),u=n(3);n(12);var d=n(18),f=a(d),p=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={customer:l.default.getList("info"),noti:null},n._onChange=n._onChange.bind(n),n._onGetNoti=n._onGetNoti.bind(n),n._onRead=n._onRead.bind(n),n.state.info=null,n._onClickNoti=n._onClickNoti.bind(n),n}return i(t,e),s(t,[{key:"_onChange",value:function(){var e=l.default.getList("info");this.setState({customer:e.customer})}},{key:"_onGetNoti",value:function(){var e=l.default.getList("noti");this.setState({noti:e})}},{key:"componentDidMount",value:function(){null==this.state.customer&&(0,u.getInfo)();var e=4;$(window).width()>=1600&&(e=7),(0,u.getNoti)(e),l.default.on("change_info",this._onChange),l.default.on("info_noti",this._onGetNoti),l.default.on("read_noti_success",this._onGetNoti)}},{key:"componentWillUnmount",value:function(){l.default.removeListener("change_info",this._onChange),l.default.removeListener("info_noti",this._onGetNoti),l.default.removeListener("read_noti_success",this._onGetNoti)}},{key:"getName",value:function(e){return e.split(" ").length<=18?e.split(" ",18).join(" "):e.split(" ",18).join(" ")+"..."}},{key:"_onRead",value:function(e,t){(0,u.readNoti)(e,t)}},{key:"_onTracking",value:function(){var e=window.ga;void 0!==e&&e("send","event","Web Account Notification Home","click","click_to_lp")}},{key:"_onTrackingAll",value:function(){var e=window.ga;void 0!==e&&e("send","event","Web Account Notification Home","click","click_to_icon")}},{key:"_onClickNoti",value:function(){this._onTrackingAll(),$(".box-noti").hasClass("active")?$(".box-noti").removeClass("active"):$(".box-noti").addClass("active"),$(document).unbind("click").bind("click",function(){$(".box-noti").removeClass("active")})}},{key:"getListNoti",value:function(){var e=this,t=this.state.noti,n="https://"+document.domain+"/desktop/img/icon/",a=[],o="",r="icon-giamgia",i=void 0,s=this.state.customer,c="";return null!==t?(t.data.map(function(t,l){switch(c=t.url,i=function(){e._onTracking()},o="",null!==s&&!1===t.is_read&&(o="unread",i=function(){e._onRead(t.id,t.url),e._onTracking()},c="javascript:;"),t.type){case"coupon":case"Coupon":case"Promotion":case"Coupon-Order":r="icon-giamgia";break;case"Order":case"order":r="icon-order";break;case"System":r="icon-system"}a.push(React.createElement("li",null,React.createElement("a",{href:c,"data-id":t.id,title:t.name,className:o,onClick:i},React.createElement("img",{src:""+n+r+".png"}),React.createElement("span",{className:"text"},e.getName(t.content)),React.createElement("span",{className:"detail"},"Chi tiết"),React.createElement("br",null),React.createElement("span",{className:"date"},f.default.unix(t.sent_at).format("DD/MM/YYYY")))))}),React.createElement("ul",{className:"list-noti"},a,React.createElement("li",null,React.createElement("a",{onClick:this._onTrackingAll,href:"/customer/notification",title:"",className:"view_more"},"Xem tất cả thông báo")))):null}},{key:"getNumNoti",value:function(){var e=this.state.customer;if(null===e)return React.createElement("div",{onClick:this._onClickNoti},React.createElement("span",{className:"number-notification user"}),React.createElement("i",{className:"ico ico-ic-notifications"}),"Thông báo",React.createElement("br",null),"của tôi");var t=e.notification_count;return t>99&&(t=99),React.createElement("div",{onClick:this._onClickNoti},t>0&&React.createElement("span",{className:"number-notification"},t),React.createElement("i",{className:"ico ico-ic-notifications"}),"Thông báo",React.createElement("br",null),"của tôi")}},{key:"render",value:function(){return this.state.customer,React.createElement("div",null,this.getNumNoti(),React.createElement("div",{className:"box-noti"},this.getListNoti()))}}]),t}(React.Component);t.default=p},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(1),l=(a(c),n(2)),u=n(3),d=n(34),f=a(d),p=n(33),h=a(p),m=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.inputOnKeyUp=n.inputOnKeyUp.bind(n),n.submitSuggestSearch=n.submitSuggestSearch.bind(n),n.initDropdown=n.initDropdown.bind(n),n.submitSearch=n.submitSearch.bind(n),n.timeout=null,n.searchHistoryTimeout=null,n.keyword="",n.category_select=!1,n.limitHistory=10;var a=n;ReactDOM.render(React.createElement(f.default,null),document.getElementById("search-suggestion")),ReactDOM.render(React.createElement(h.default,null),document.getElementById("search-autocomplete"));var i=$("#search_form input[name=q]");return $("#search_form").on("submit",n.submitSearch),i.on("keyup",n.inputOnKeyUp),i.on("focus",function(){null!==a.searchHistoryTimeout&&(clearTimeout(a.searchHistoryTimeout),a.searchHistoryTimeout=null),0===$(this).val().length&&a.toggleSearchLastKeyword(!0)}),i.on("blur",function(){a.searchHistoryTimeout=setTimeout(function(){(0,l.toggleHeaderOverlay)(!1),a.toggleSearchLastKeyword(!1)},500)}),n.initDropdown(),n}return i(t,e),s(t,[{key:"toggleSearchLastKeyword",value:function(e){e?$("#search-autocomplete").show():$("#search-autocomplete").hide()}},{key:"inputOnKeyUp",value:function(e){var t=$(e.currentTarget),n=this;if(0===t.val().length?n.toggleSearchLastKeyword(!0):n.toggleSearchLastKeyword(!1),this.timeout&&clearTimeout(this.timeout),t.val().length<2)return(0,l.toggleHeaderOverlay)(!1),!0;this.keyword=t.val(),this.timeout=setTimeout(function(){n.submitSuggestSearch()},1e3)}},{key:"submitSuggestSearch",value:function(){(0,u.getSearchSuggestion)(this.keyword),$("#search-suggestion").show(),(0,l.toggleHeaderOverlay)(!0)}},{key:"submitSearch",value:function(e){var t=$("<div>"),n=$("#search_form input[name=q]"),a=n.val();""!==a.trim()&&(t.html(a),(0,u.storeKeyword)({title:t.text(),url:null,type:"keyword"}),"undefined"!=typeof ga&&ga("send","event","Desktop Web - Search","Search Submission",a),this.targetingTalalytics(),"undefined"!=typeof localStorage&&(localStorage.setItem("direct-flag",1),localStorage.setItem("submitSearchUnix",(new Date).getTime())),"undefined"!=typeof amplitude&&amplitude.logEvent("Submit Search",{keyword:a}),"undefined"!=typeof searchCategoryPath&&$("#search_form .search-in-category").prop("checked")&&(e.preventDefault(),window.location=searchCategoryPath+"?q="+a+"&ref=categorySearch"))}},{key:"targetingTalalytics",value:function(){var e=$("#search_form input[name=q]");"undefined"!=typeof talalytics&&talalytics.track({type:"event",eventType:"SEARCH",keyword:e.val(),userId:customerId.toString(),source:searchTuningVersion,variant:Tala.readCookie("Extendssearchresult_596f1915ac8f3800014bea0a")})}},{key:"componentDidMount",value:function(){}},{key:"initDropdown",value:function(){var e=this;$("#search_form").find(".dropdown").each(function(){var t=void 0,n=void 0,a=void 0;t=$(this).find(".dropdown-button"),n=$(this).find(".dropdown-menu"),a=$(this).find("input"),t.on("click",function(e){e.preventDefault(),e.stopPropagation(),n.toggleClass("show-menu"),n.hasClass("show-menu")&&$("body").one("click",function(e){n.removeClass("show-menu")})}),n.children("li").click(function(){n.removeClass("show-menu"),t.html($(this).html()),void 0!==a&&a.val($(this).data("value")),e.category_select=$(this).data("value")});var o=$(this).find(".selected").data("value");void 0!==a&&void 0!==o&&a.val(o),e.category_select=o})}},{key:"componentWillUnmount",value:function(){}}]),t}(React.Component);t.default=m},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(8);var c=n(5),l=(a(c),n(7)),u=a(l),d=n(1),f=(a(d),n(9)),p=n(2),h=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.carouselInited=!1,n.changed=!1,n.stateRequested=!1,n.state=u.default.getList("recently_header"),n._onChange=n._onChange.bind(n),n.loader=null,n.recentlyLinkTimeout=!1,n.recentlyContainerTimeout=!1,n}return i(t,e),s(t,[{key:"setLocalRecently",value:function(e){var t=e.slice(0,5);"undefined"!=typeof localStorage&&localStorage.setItem("productRecentlyListId",JSON.stringify(t))}},{key:"_onChange",value:function(){var e=u.default.getList("recently_header");""!==e.html&&(console.log("change"),this.changed=!0,this.setState(e),this.bindImpressTrack(),null!==this.loader&&this.loader.remove(),!this.carouselInited&&$("#main-ajax-recentlyviewed").is(":visible"))}},{key:"bindImpressTrack",value:function(){var e=$(ReactDOM.findDOMNode(this)),t=e.parents("[data-impress-list-title]").attr("data-impress-list-title");e.find(".product-item a.track").each(function(e,n){void 0===$(this).data("impressListName")&&($(this).data("impressListName",t),$(this).data("impressPosition",e+1),$(this).on("click",function(){window.impress_click_product($(this))}))})}},{key:"componentDidUpdate",value:function(){var e=[];$(ReactDOM.findDOMNode(this)).find(".product-item a[data-id]").each(function(){var t=$(this);e.push({title:t.attr("data-title"),id:t.attr("data-id")})}),this.setLocalRecently(e)}},{key:"componentDidMount",value:function(){var e=this;u.default.on("change_carousel_html",this._onChange),$("#main-ajax-recentlyviewed").hover(function(){e.recentlyContainerTimeout=setTimeout(function(){(0,p.toggleHeaderOverlay)(!0),$("#main-ajax-recentlyviewed").toggleClass("show",!0),e.stateRequested||(e.stateRequested=!0,$("#product_id").length>0?(0,f.getCarousel)(e.props.url+"&limit=15&product_id="+$("#product_id").val(),"recently_header"):(0,f.getCarousel)(e.props.url+"&limit=15","recently_header"),e.loader=$(".product-recently-content").showLoaderLayer())},300)},function(){null!==e.recentlyContainerTimeout&&(clearTimeout(e.recentlyContainerTimeout),e.recentlyContainerTimeout=null),(0,p.toggleHeaderOverlay)(!1),$("#main-ajax-recentlyviewed").toggleClass("show",!1)})}},{key:"loadProductCarousel",value:function(){console.log("init carousel"),this.carouselInited=!0;var e={slidesPerView:10,slidesPerGroup:10,spaceBetween:0,preloadImages:!1,lazyLoading:!1,lazyLoadingOnTransitionStart:!0,preventClicks:!0,preventClicksPropagation:!0,onTransitionEnd:this._onTransitionEnd.bind(this)};(document.documentMode||/Edge/.test(navigator.userAgent))&&(e.preventClicks=!1,e.preventClicksPropagation=!1);var t=this;$(ReactDOM.findDOMNode(this)).find(".js-list-product").each(function(){e.nextButton=$(this).parent().find(".swiper-button-next"),e.prevButton=$(this).parent().find(".swiper-button-prev"),new Swiper($(this),e),t._lazyLoad($(this))})}},{key:"_onTransitionEnd",value:function(e){this._lazyLoad($(e.container[0]))}},{key:"_lazyLoad",value:function(e){e.find("img.lazy").lazy({effect:"fadeIn",effectTime:200,threshold:0,bind:"event"})}},{key:"render",value:function(){var e=$("<div>").append(this.state.html);e.find(".image img").each(function(){$(this).attr("data-src",$(this).attr("src")),$(this).attr("src",""),$(this).addClass("lazy")});var t=e.html();return React.createElement("div",{className:"product-recently-content swiper-carousel-wrapper",dangerouslySetInnerHTML:{__html:t}})}}]),t}(React.Component);t.default=h},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=n(3),u=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={items:n.getKeywords(),top_keyword:{total:0,data:[]}},n._onChangeKeyword=n._onChangeKeyword.bind(n),n._onChangeTopKeyword=n._onChangeTopKeyword.bind(n),n._onClick=n._onClick.bind(n),n}return r(t,e),i(t,[{key:"getKeywords",value:function(){var e=JSON.parse(localStorage.getItem("search-keyword"));return(0,l.setKeywordHistory)({items:e}),e}},{key:"componentDidMount",value:function(){c.default.on("change_keyword_history",this._onChangeKeyword),c.default.on("change_top_keyword",this._onChangeTopKeyword),(0,l.getTopKeyword)()}},{key:"_onHover",value:function(e){var t=$(e.currentTarget);$("#search_form input[name=q]").val(t.attr("data-value"))}},{key:"_onClick",value:function(e){e.preventDefault();var t=$(e.currentTarget),n=this.state.items[t.attr("data-index")];(0,l.storeKeyword)(n);var a=Tala.makeUrlFromParams({ref:"keywordsHistory"},n.url);window.location.href=a}},{key:"removeHistory",value:function(){localStorage.setItem("search-keyword",null),this.setState({items:null})}},{key:"_onChangeTopKeyword",value:function(){this.setState({top_keyword:c.default.getList("top_keyword")})}},{key:"_onChangeKeyword",value:function(){var e=c.default.getList("search_history").items;localStorage.setItem("search-keyword",JSON.stringify(e))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,n=t.items,a=t.top_keyword,o=React.createElement("div",{className:"keyword-remember",style:{display:"none"}});if(null!==n||a.length>0){var r="",i="";null!==n&&(i=React.createElement("div",{className:"remember-list"},React.createElement("h3",null,"Lịch sử tìm kiếm"),React.createElement("a",{className:"clear",onClick:this.removeHistory.bind(this),href:"javascript:","aria-hidden":"true",title:"Xóa lịch sử tìm kiếm"},"Xóa"),React.createElement("p",{className:"item"},n.map(function(t,n){var a=t.title,o=t.url;-1===o.indexOf("ref")&&(o=Tala.makeUrlFromParams({ref:"past-keyword"},o));var r="category"===t.type&&t.category_name;return r?React.createElement("a",{href:o,onClick:e._onClick,"data-title":a,title:a,"data-category":r,key:n,"data-index":n},React.createElement("strong",null,a)," ",React.createElement("i",null,"trong")," ",React.createElement("em",null,r)):React.createElement("a",{href:o,onClick:e._onClick,"data-title":a,title:a,key:n,"data-index":n},a)})))),a.data.length>0&&(r=React.createElement("div",{className:"top-keyword remember-list"},React.createElement("h3",null,"TỪ KHÓA HOT"),React.createElement("p",{className:"item"},a.data.map(function(e,t){return React.createElement("a",{href:"/search?q="+e.keyword+"&ref=hot-keyword"},e.keyword)})))),o=React.createElement("div",{className:"keyword-remember"},r,i)}return o}}]),t}(React.Component);t.default=u},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=n(3),u=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=c.default.getList("search_suggestion"),n._onChange=n._onChange.bind(n),n._onClickKeyword=n._onClickKeyword.bind(n),n.impressClick=n.impressClick.bind(n),n}return r(t,e),i(t,[{key:"impressClick",value:function(e){var t=$(e.currentTarget);window.impress_click_product(t)}},{key:"_onChange",value:function(){this.setState(c.default.getList("search_suggestion"))}},{key:"_onClickKeyword",value:function(e){var t=$(e.currentTarget),n=t.attr("data-index"),a=t.attr("data-type"),o=!1,r={type:a};"category"===a&&(o=this.state.category[n],r.title=o.title,r.category_name=o.category_name,r.url=o.url),"keyword"===a&&(o=this.state.keyword[n],r.title=o.title,r.url=o.url),!1!==o&&(0,l.storeKeyword)(r)}},{key:"componentDidMount",value:function(){c.default.on("change_search_suggestion",this._onChange)}},{key:"componentWillUnmount",value:function(){c.default.removeListener("change_search_suggestion",this._onChange)}},{key:"render",value:function(){var e=this.state,t=void 0,n=this,a="none";null!==e.product&&e.product.length>0&&(a="block",t=React.createElement("div",null,React.createElement("h3",null,"Sản phẩm gợi ý"),Object.keys(e.product).map(function(t){var a=e.product[t],o=parseInt(t)+1;return React.createElement("div",{onClick:n.impressClick,className:"suggestion-product-item","data-impress-position":o,"data-impress-list-name":"Search Suggestion",key:t,"data-id":a.id,"data-title":a.title,"data-brand":a.brand,"data-category":a.attributeset_group_name},React.createElement("a",{title:a.title,href:a.url},React.createElement("img",{src:a.thumbnail}),React.createElement("p",{className:"item-info"},React.createElement("span",null,a.title,0!==a.is_ebook?React.createElement("span",{className:"badge"},"Ebook"):""),React.createElement("span",null,a.price,React.createElement("span",null,a.list_price," ")))))})));var o="";null!==e.category&&(a="block",o=Object.keys(e.category).map(function(t){var a=e.category[t];return React.createElement("p",{onClick:n._onClickKeyword,"data-type":"category","data-title":a.title,"data-index":t,key:t,className:"item","data-cat-id":a.category_id},React.createElement("a",{href:a.url},React.createElement("strong",null,a.title)," ",React.createElement("i",null,"trong")," ",React.createElement("em",null,a.category_name)))}));var r="";return null!==e.keyword&&(a="block",r=Object.keys(e.keyword).map(function(t){var a=e.keyword[t];return React.createElement("p",{onClick:n._onClickKeyword,"data-type":"keyword","data-title":a.title,"data-index":t,key:t,className:"item"},React.createElement("a",{href:a.url},a.title))})),React.createElement("div",{className:"search-suggestion",style:{display:a}},o,r,t)}}]),t}(React.Component);t.default=u},function(e,t,n){e.exports=n(0)(136)},function(e,t,n){e.exports=n(0)(137)},function(e,t,n){e.exports=n(0)(139)},function(e,t,n){e.exports=n(0)(202)},function(e,t,n){e.exports=n(0)(219)},,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(8);var c=n(7),l=a(c),u=n(9),d=n(45),f=a(d),p=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=l.default.getList("recommendation");return n.state=a[n.props.scenarioId],n._onChange=n._onChange.bind(n),n.loadProductCarousel=n.loadProductCarousel.bind(n),n}return i(t,e),s(t,[{key:"_onChange",value:function(){var e=l.default.getList("recommendation");this.setState(e[this.props.scenarioId])}},{key:"componentDidUpdate",value:function(){this.loadProductCarousel()}},{key:"componentDidMount",value:function(){l.default.on("change_recommendation",this._onChange),(0,u.getRecommendation)(this.props.clientId,this.props.customerId,this.props.productId,this.props.scenarioId)}},{key:"componentWillUnmount",value:function(){l.default.removeListener("change_recommendation",this._onChange)}},{key:"loadProductCarousel",value:function(){var e={slidesPerView:5,slidesPerGroup:5,spaceBetween:0,preloadImages:!1,lazyLoading:!1,lazyLoadingOnTransitionStart:!0,preventClicks:!0,preventClicksPropagation:!0,onTransitionEnd:this._onTransitionEnd.bind(this)};(document.documentMode||/Edge/.test(navigator.userAgent))&&(e.preventClicks=!1,e.preventClicksPropagation=!1);var t=this;$(ReactDOM.findDOMNode(this)).find(".js-list-product").each(function(){e.nextButton=$(this).parent().find(".swiper-button-next"),e.prevButton=$(this).parent().find(".swiper-button-prev"),new Swiper($(this),e),$(this).find(".swiper-slide").css("height","auto"),$(this).find(".product-item").css("height","100%"),t._lazyLoad($(this))})}},{key:"_onTransitionEnd",value:function(e){this._lazyLoad($(e.container[0]))}},{key:"_lazyLoad",value:function(e){e.find("img.lazy").lazy({effect:"fadeIn",effectTime:200,threshold:0,bind:"event"})}},{key:"render",value:function(){var e=this,t=this.state.items.map(function(t,n){var a=void 0!==e.props.impressTitle?e.props.impressTitle:e.props.title;return React.createElement(f.default,{key:n,impressListName:a,impressPosition:n+1,item:t,customerId:customerId})}),n="block";return this.state.items.length<4&&(n="none"),React.createElement("div",{className:"product-author-box",style:{display:n}},React.createElement("div",{className:"product-author-title"},React.createElement("h4",null,this.props.title)),React.createElement("div",{className:"product-author-content swiper-carousel-wrapper"},React.createElement("div",{className:"swiper-container js-list-product"},React.createElement("div",{className:"swiper-wrapper"},t)),React.createElement("div",{className:"swiper-button-next swiper-button-black"}),React.createElement("div",{className:"swiper-button-prev swiper-button-black"})))}}]),t}(React.Component);t.default=p},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(8);var r=function(){function e(t){a(this,e),this.$elements=$(t),this.list=[],this._addEvent()}return o(e,[{key:"_addEvent",value:function(){var e=this,t={spaceBetween:10,centeredSlides:!0,effect:"slide",paginationClickable:!0,preventClicks:!0,preventClicksPropagation:!0,longSwipesMs:300,onTransitionEnd:this._onTransitionEnd.bind(this),onInit:this._onInit.bind(this)};this.$elements.length&&this.$elements.map(function(n,a){var o=$(a);t.nextButton=o.find(".swiper-button-next"),t.prevButton=o.find(".swiper-button-prev"),t.pagination=o.find(".swiper-pagination"),e.list.push(new Swiper(a,t))})}},{key:"_onTransitionEnd",value:function(e){$(e.container[0]).find(".before-end").removeClass(".before-end"),e.isEnd&&$(e.container[0]).find(".swiper-slide").eq(e.activeIndex-1).addClass("before-end"),$(e.container[0]).find("img.lazy").lazy({effect:"fadeIn",effectTime:200,threshold:0,bind:"event"})}},{key:"_onInit",value:function(e){Object.keys(e.slides).map(function(t,n){var a=$(t);if(a.is("[title]")){var o=a.children("a").attr("title");$(e.bullets[n]).attr("title",o)}}),$(e.container[0]).find(".swiper-pagination-bullet").tooltip({container:"body"})}}]),e}();t.default=r},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(8);var r=function(){function e(t){a(this,e),this.$elements=$(t),this.$nav=this.$elements.find(".home-slideshow-nav"),this.$content=this.$elements.find(".home-slideshow-content"),this.$navSlide=this.$nav.find(".swiper-slide"),this.list={},this._addEvent()}return o(e,[{key:"_addEvent",value:function(){var e={autoplay:3e3,longSwipesMs:500,paginationClickable:!0,spaceBetween:0,effect:"slide",direction:"vertical",pagination:this.$content.find(".swiper-pagination"),onTransitionEnd:this._onTransitionEnd.bind(this),onSlideChangeStart:this._onSlideChangeStart.bind(this)},t={slidesPerView:"auto",onClick:this._onNavClick.bind(this)};this.list.content=new Swiper(this.$content,e),this.list.nav=new Swiper(this.$nav,t),this.$navSlide.on("mouseover",this._onNavOver.bind(this)),this.$navSlide.on("mouseout",this._onNavOut.bind(this))}},{key:"_onNavClick",value:function(e,t){this.list.content.slideTo(e.clickedIndex)}},{key:"_onNavOver",value:function(e){var t=this,n=$(e.currentTarget);this.list.content.stopAutoplay(),clearInterval(this.time),this.time=setTimeout(function(){return t.list.content.slideTo(n.index())}.bind(this),20)}},{key:"_onNavOut",value:function(e){this.list.content.startAutoplay()}},{key:"_onSlideChangeStart",value:function(e,t,n){this.$nav.find(".active-nav").removeClass("active-nav");var a=this.$navSlide.eq(e.activeIndex).addClass("active-nav"),o=void 0;a.hasClass("swiper-slide-visible")||(a.index()>this.list.nav.activeIndex?(o=Math.floor(this.list.nav.width/a.width())-1,this.list.nav.slideTo(a.index()-o)):this.list.nav.slideTo(a.index()))}},{key:"_onTransitionEnd",value:function(e){$(e.container[0]).find("img.lazy").lazy({effect:"fadeIn",effectTime:200,bind:"event"})}}]),e}();t.default=r},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(8);var c=n(7),l=a(c),u=n(1),d=(a(u),n(9)),f=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=l.default.getList(n.props.stateName),n._onChange=n._onChange.bind(n),n.mergeRecentlyviewed=n.mergeRecentlyviewed.bind(n),n.parameterRecentlyViewed=n.getParam(),n}return i(t,e),s(t,[{key:"mergeRecentlyviewed",value:function(){var e=this;if(Tala.readCookie("TIKI_RECENTLYVIEWED")&&"undefined"!=typeof recentlyViewTrack){var t=Tala.readCookie("TIKI_RECENTLYVIEWED");t&&(recentlyViewTrack(t),document.cookie="TIKI_RECENTLYVIEWED=null; expires=Thu, 18 Dec 2000 12:00:00 UTC")}setTimeout(function(){e.parameterRecentlyViewed=e.getParam(),(0,d.getCarousel)(e.props.url+e.parameterRecentlyViewed,e.props.stateName)},2e3)}},{key:"setLocalRecently",value:function(e){var t=e.slice(0,5);"undefined"!=typeof localStorage&&localStorage.setItem("productRecentlyListId",JSON.stringify(t))}},{key:"getParam",value:function(){var e="",t=Tala.readCookie("TIKI_RECENTLYVIEWED"),n=$("#product_id").val();return void 0!==n?(e="?product_id="+n,!customerId&&t&&(e+="&ids="+t)):!customerId&&t&&(e+="?ids="+t),e}},{key:"_onChange",value:function(){this.setState(l.default.getList(this.props.stateName)),this.loadProductCarousel(),this.bindImpressTrack()}},{key:"bindImpressTrack",value:function(){var e=$(ReactDOM.findDOMNode(this)),t=e.parents("[data-impress-list-title]").attr("data-impress-list-title");e.find(".product-item").each(function(e,n){void 0===$(this).data("impressListName")&&($(this).data("impressListName",t),$(this).data("impressPosition",e+1),$(this).on("click",function(){window.impress_click_product($(this))}))})}},{key:"componentDidUpdate",value:function(){var e=[],t=$(ReactDOM.findDOMNode(this));t.find(".product-item").each(function(){var t=$(this);e.push({title:t.attr("data-title"),id:t.attr("data-id")})}),this.setLocalRecently(e);var n=this.props.min;n&&(t.find(".product-item").length<n?t.parents(".box-recentlyviewed-product").hide():t.parents(".box-recentlyviewed-product").show())}},{key:"componentDidMount",value:function(){l.default.on("change_carousel_html",this._onChange),"undefined"!=typeof customerId&&0!==customerId?this.mergeRecentlyviewed():(0,d.getCarousel)(this.props.url+this.parameterRecentlyViewed,this.props.stateName)}},{key:"loadProductCarousel",value:function(){var e=void 0!==this.props.sliderLimit?this.props.sliderLimit:5,t={slidesPerView:e,slidesPerGroup:e,spaceBetween:0,preloadImages:!1,lazyLoading:!1,lazyLoadingOnTransitionStart:!0,preventClicks:!0,preventClicksPropagation:!0,onTransitionEnd:this._onTransitionEnd.bind(this)};(document.documentMode||/Edge/.test(navigator.userAgent))&&(t.preventClicks=!1,t.preventClicksPropagation=!1);var n=this;$(ReactDOM.findDOMNode(this)).find(".js-list-product").each(function(){t.nextButton=$(this).parent().find(".swiper-button-next"),t.prevButton=$(this).parent().find(".swiper-button-prev"),new Swiper($(this),t),$(this).find(".swiper-slide").css("height","auto"),$(this).find(".product-item").css("height","100%"),n._lazyLoad($(this))})}},{key:"_onTransitionEnd",value:function(e){this._lazyLoad($(e.container[0]))}},{key:"_lazyLoad",value:function(e){e.find("img.lazy").lazy({effect:"fadeIn",effectTime:200,threshold:0,bind:"event"})}},{key:"render",value:function(){var e=$("<div>").append(this.state.html);e.find(".image img").each(function(){$(this).attr("data-src",$(this).attr("src")),$(this).attr("src",""),$(this).addClass("lazy")});var t=e.html();return React.createElement("div",{dangerouslySetInnerHTML:{__html:t}})}}]),t}(React.Component);t.default=f},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),c=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.props.item,n}return r(t,e),i(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"impressClick",value:function(e){$(e.currentTarget).data("impressListName",$(e.currentTarget).attr("data-impressListName")),$(e.currentTarget).data("impressPosition",$(e.currentTarget).attr("data-impressPosition")),window.impress_click_product($(e.currentTarget))}},{key:"render",value:function(){var e=this.props.item,t=void 0,n=void 0,a=void 0;if(e.list_price!==e.price&&e.list_price>0){var o=Math.round((e.list_price-e.price)/e.list_price*100,0);t=React.createElement("span",{className:"sale-tag sale-tag-square"},"-",o,"%"),n=React.createElement("span",{className:"price-regular"},(0,s.mycurrency)(e.list_price)," ₫")}e.price>0&&(a=React.createElement("p",{className:"price-sale"},(0,s.mycurrency)(e.price)," ₫",n,t));var r="Home | ";$("body").hasClass("tiki-product")&&(r="Product Detail | ");var i=React.createElement("p",null,"Chưa có nhận xét");return e.review_count>0&&(i=React.createElement("div",null,React.createElement("p",{className:"rating"},React.createElement("span",{className:"rating-content"},React.createElement("i",{className:"star"}),React.createElement("i",{className:"star"}),React.createElement("i",{className:"star"}),React.createElement("i",{className:"star"}),React.createElement("i",{className:"star"}),React.createElement("span",{style:{width:Math.round(e.rating_average/5*100,0)+"%"}},React.createElement("i",{className:"star"}),React.createElement("i",{className:"star"}),React.createElement("i",{className:"star"}),React.createElement("i",{className:"star"}),React.createElement("i",{className:"star"})))),React.createElement("p",{className:"review"},"(",e.review_count," nhận xét)"))),React.createElement("div",{className:"swiper-slide"},React.createElement("div",{onMouseDown:this.impressClick.bind(this),"data-impressListName":r+this.props.impressListName,"data-impressPosition":this.props.impressPosition,"data-id":e.id,"data-title":e.name,className:"product-item abc-testing-product-item",rel:"recoflatform","data-typeblock":"RELATED_PRODUCT","data-recid":e.rec_id,"data-customerId":this.props.customerId},React.createElement("a",{"data-id":e.id,href:"/"+e.url_key+".html",title:e.name,className:""},React.createElement("span",{className:"image"},React.createElement("span",{className:"product-right-icon"},e.badges.map(function(e){if("2h"===e.code)return React.createElement("img",{srcSet:"https://vcdn.tikicdn.com/desktop/img/2h-circle.png 1x, https://vcdn.tikicdn.com/desktop/img/2h-circle@2x.png 2x",className:"img2h",width:"31",height:"24",alt:"Hỗ trợ giao hàng trong 2h",title:"Hỗ trợ giao hàng trong 2h"})})),React.createElement("img",{className:"lazy","data-src":e.thumbnail_url,alt:""})),React.createElement("span",{className:"title"},e.name),a,i),React.createElement("button",{"data-sku":e.sku,"data-title":e.name,"data-price":e.price,"data-src":"",type:"button","data-product-type":e.type,className:"btn btn-large btn-block btn-default add-to-cart","data-id":e.id},React.createElement("img",{src:"https://vcdn.tikicdn.com/assets/img/ico10.png",height:"14",width:"18",alt:""}),"Thêm vào giỏ hàng")))}}]),t}(React.Component);t.default=c},,,,function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(8);var r=function(){function e(t){a(this,e),this.$elements=$(t),this.list=[],this._addEvent(),console.log(1)}return o(e,[{key:"_addEvent",value:function(){var e=this,t=this;this.options={slidesPerView:4,slidesPerGroup:4,spaceBetween:0,preventClicks:!0,preventClicksPropagation:!0,onTransitionEnd:this._onTransitionEnd.bind(this)},this.$elements.find(".tab-pane.active").map(function(n,a){var o=$(a),r=o.find(".swiper-container");e.options.nextButton=o.find(".swiper-button-next"),e.options.prevButton=o.find(".swiper-button-prev"),t.list.push(new Swiper(r,e.options)),e.$elements.find(".swiper-slide").css("height","366px"),e.$elements.find(".product-item").css("height","100%")}),this.$elements.on("shown.bs.tab",this._shownTab.bind(this)),this.$elements.find(".product-item").on("click","a",function(e){window.location.href=$(this).attr("href")})}},{key:"_shownTab",value:function(e){var t=$(e.currentTarget),n=t.find(".tab-pane.active"),a=n.find(".swiper-container");void 0===a[0].swiper&&(this.options.nextButton=n.find(".swiper-button-next"),this.options.prevButton=n.find(".swiper-button-prev"),this.list.push(new Swiper(a,this.options))),this._lazyLoad(a);var o=t.find(".nav-tabs .active").text().trim(),r=n.find(".home-see-all").attr("href");t.find(".see-all-face").text("Xem tất cả "+o),t.find(".see-all-face").attr("href",r)}},{key:"_onTransitionEnd",value:function(e){this._lazyLoad($(e.container[0]))}},{key:"_lazyLoad",value:function(e){e.find("img.lazy").lazy({effect:"fadeIn",effectTime:200,threshold:0,bind:"event"})}}]),e}();t.default=r},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(8);var s=n(7),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=n(9),u=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=c.default.getList(n.props.stateName),n._onChange=n._onChange.bind(n),n}return r(t,e),i(t,[{key:"_onChange",value:function(){this.setState(c.default.getList(this.props.stateName)),this.loadProductCarousel(),this.bindImpressTrack()}},{key:"bindImpressTrack",value:function(){var e=$(ReactDOM.findDOMNode(this)),t=e.parents("[data-impress-list-title]").attr("data-impress-list-title");e.find(".product-item").each(function(e,n){void 0===$(this).data("impressListName")&&($(this).data("impressListName",t),$(this).data("impressPosition",e+1),$(this).on("click",function(){window.impress_click_product($(this))}))})}},{key:"componentDidMount",value:function(){c.default.on("change_carousel_html",this._onChange),(0,l.getCarousel)(this.props.url,this.props.stateName)}},{key:"loadProductCarousel",value:function(){var e={slidesPerView:5,slidesPerGroup:5,spaceBetween:0,preloadImages:!1,lazyLoading:!1,lazyLoadingOnTransitionStart:!0,preventClicks:!0,preventClicksPropagation:!0,onTransitionEnd:this._onTransitionEnd.bind(this)};(document.documentMode||/Edge/.test(navigator.userAgent))&&(e.preventClicks=!1,e.preventClicksPropagation=!1);var t=this;$(ReactDOM.findDOMNode(this)).find(".js-list-product").each(function(){e.nextButton=$(this).parent().find(".swiper-button-next"),e.prevButton=$(this).parent().find(".swiper-button-prev"),new Swiper($(this),e),$(this).find(".swiper-slide").css("height","auto"),$(this).find(".product-item").css("height","100%"),t._lazyLoad($(this))})}},{key:"_onTransitionEnd",value:function(e){this._lazyLoad($(e.container[0]))}},{key:"_lazyLoad",value:function(e){e.find("img.lazy").lazy({effect:"fadeIn",effectTime:500,threshold:0,bind:"event"})}},{key:"render",value:function(){var e=$("<div>").append(this.state.html);e.find(".image img").each(function(){$(this).attr("data-src",$(this).attr("src")),$(this).attr("src",""),$(this).addClass("lazy")});var t=e.html();return React.createElement("div",{dangerouslySetInnerHTML:{__html:t}})}}]),t}(React.Component);t.default=u},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n(10);var r=n(14),i=(a(r),n(2)),s=n(16),c=a(s),l=n(15),u=a(l),d=n(42),f=a(d),p=n(49),h=a(p),m=n(43),g=(a(m),n(17)),y=a(g),v=n(41),_=a(v),b=n(44),w=a(b),k=n(50),E=a(k),C=n(6),R=a(C);new function e(){o(this,e),(0,R.default)();var t=(new c.default,new u.default,new y.default,new f.default(".home-banner"),new h.default(".home-tabs"),(0,i.readCookie)("gr_reco")),n="undefined"!=typeof userId?userId:-1;if("undefined"!=typeof recentlyViewed&&1===recentlyViewed&&$("#box-recentlyviewed-product").length>0&&ReactDOM.render(React.createElement(w.default,{min:5,sliderLimit:5,stateName:"recently_viewed",url:"/ajax_recentlyviewed"}),document.getElementById("box-recentlyviewed-product")),$(".box-recommendation-related-product").length>0&&$(".box-recommendation-related-product").each(function(){$(this).show(),ReactDOM.render(React.createElement(_.default,{title:"Gợi ý dành riêng cho bạn",clientId:t,customerId:n,productId:null,scenarioId:"related_only_you"}),this)}),$(".not-tiki-product").length>0&&($(".not-tiki-product").show(),ReactDOM.render(React.createElement(E.default,{stateName:"not_tiki",url:"products/not_seller/1"}),$(".not-tiki-product").get(0))),$(".box-recommendation-related-recently-product").length>0&&"undefined"!=typeof localStorage){var a=localStorage.getItem("productRecentlyListId"),r=JSON.parse(a);null!==r&&r.length>0&&$(".box-recommendation-related-recently-product").each(function(){$(this).show();var e=$(this).attr("data-impress-list-title"),a=Math.floor(Math.random()*(r.length-1+1))+1,o=r[a-1];ReactDOM.render(React.createElement(_.default,{impressTitle:e,title:"Liên quan đến sản phẩm bạn đã xem",clientId:t,customerId:n,productId:o.id,scenarioId:"related_product"}),this)})}"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js")}}]);
//# sourceMappingURL=home.js.map